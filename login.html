<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <link rel="stylesheet" href="css/beating-heart.css">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">
    <title>登入日誌</title>
</head>

<body>
    <div class="container">
        <br>
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">

                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#nav" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                    <a class="navbar-brand" class="navbar-brand" href="index.html">健康日誌</a>

                </div>

                <div class="collapse navbar-collapse" id="nav">

                    <ul class="nav navbar-nav">
                        <li>
                            <a href="create.html">CREATE</a>
                        </li>
                        <li class="active">
                            <a href="login.html">LOGIN</a>
                        </li>
                    </ul>

                </div>
            </div>
        </nav>



        <div id="firebaseui-auth-container"></div>

    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.3.1/firebase.js"></script>
    <script src="firebase\firebase_beating_heart.js"></script>


    <!-- firebase-ui-auth -->
    <script src="https://www.gstatic.com/firebasejs/ui/live/0.4/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/live/0.4/firebase-ui-auth.css" />
    <!-- End - member plugins -->

    <script>

        /**********************\
         * Check login status *
        \**********************/

        // 如果已經登入就導到profile.html
        firebase.auth().onAuthStateChanged(function(user) {
            if (user) { 
                window.location.href = 'profile.html';
            }
        });

        /*******************\
         * init Login UI *
        \*******************/

        // FirebaseUI config.
        var uiConfig = {
            'signInSuccessUrl': false,
            'signInOptions': [
                // comment unused sign-in method
                firebase.auth.GoogleAuthProvider.PROVIDER_ID, // 開啟 google API第三方登入
                //firebase.auth.FacebookAuthProvider.PROVIDER_ID,
                //firebase.auth.TwitterAuthProvider.PROVIDER_ID,
                //firebase.auth.GithubAuthProvider.PROVIDER_ID,
                firebase.auth.EmailAuthProvider.PROVIDER_ID  // 開啟 一般信箱登入
            ],
            // Terms of service url.
            'tosUrl': false,
        };

        // Initialize the FirebaseUI Widget using Firebase.
        var ui = new firebaseui.auth.AuthUI(firebase.auth());
        // The start method will wait until the DOM is loaded.
        ui.start('#firebaseui-auth-container', uiConfig);

        ////////////////////////////////////////
    </script>


</body>

</html>